\documentclass[$paper$, $fontsize$, $onetwoside$]{scrbook}

\usepackage[left=$marginleft$, right=$marginright$, top=$margintop$, bottom=$marginbottom$]{geometry}

% redefine \maketitle from scrbook to print timestamp
\renewcommand{\maketitle}{%
  \begin{titlepage}
    \begin{center}
      \vfill
      \Huge
      \textbf{$title$}
      \vfill
      \LARGE
      $subtitle$
      \vfill
      \textbf{$author$}
      \vfill
      \includegraphics[width=0.4\textwidth]{figures/leanpub.pdf}
      \vfill
    \end{center}
  \end{titlepage}
}

\author{$author$}
\title{$title$}
\date{$date$}

\usepackage[colorlinks]{hyperref}
\usepackage{color}
\usepackage{fancyvrb}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{float}
\usepackage{wallpaper}

$if(amsmath)$
  \usepackage{amsmath}
  \usepackage{amssymb}
  \usepackage{amsthm}
$endif$

% texlive >= 2020
$if(csl-refs)$
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newenvironment{CSLReferences}[2]
  {$if(csl-hanging-indent)$\setlength{\parindent}{0pt}
  \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces$endif$}
  {\par}
$endif$

\usepackage{amsmath}
\usepackage{amssymb}

$if(amsthm)$
  \usepackage{amsthm}
$endif$

% set link colour to UofT blue (#00204e)
\usepackage{xcolor}
\definecolor{myblue}{HTML}{00204e}
\hypersetup{colorlinks,linkcolor=myblue,urlcolor=myblue}

\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}

\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\setlength{\parindent}{0pt}
\setlength{\parskip}{1em}

\begin{document}
  \pagenumbering{gobble}
  \ThisLLCornerWallPaper{1}{figures/cover.pdf}
  \begin{center}\end{center} % gross hack to avoid pages overlapping
  \cleardoublepage
  \newpage

  \maketitle

  \chapter*{$title$}

  by $author$

  \copyright $date$ $author$

  Published by Leanpub, 1321 Blanshard Street, Suite 301, Victoria, BC V8W 0B6.
  
  This is a Leanpub book. Leanpub empowers authors and publishers with the Lean
  Publishing process. Lean Publishing is the act of publishing an in-progress
  ebook using lightweight tools and many iterations to get reader feedback, pivot
  until you have the right book and build traction once you do.

  Online edition is available for this title
  (\emph{https://leanpub.com/$leanpublink$}).

  $date$: First Edition

  The Leanpub logo is a registered trademark of Ruboss Technology Corp. The
  book right's belong to the author.

  $isbn$

  \newpage

  \tableofcontents

  \mainmatter

  % main chapters go here
  $body$
  
  % appendices go here
  \appendix
\end{document}
